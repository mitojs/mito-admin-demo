{"version":3,"sources":["webpack:///./src/components/GrowthRate.tsx","webpack:///./src/modules/Main/modules/Project/components/ProjectCard/index.tsx","webpack:///./src/modules/Main/modules/Project/views/Project.tsx","webpack:///./src/modules/Main/modules/Project/components/ProjectCard/index.module.less","webpack:///./src/components/AreaChart.tsx","webpack:///./src/modules/Main/modules/Project/views/style.module.less","webpack:///./src/hooks/useCount/index.tsx"],"names":["WrapStatistic","styled","GrowthRate","rateNum","title","fontSize","isGrow","color","THEMECOLORS","red","green","value","precision","valueStyle","prefix","ArrowUpOutlined","ArrowDownOutlined","suffix","WrapSpan","span","theme","colors","blue","ProjectCard","props","project","history","useHistory","dispatch","useDispatch","dispatchProject","projectId","type","CHANGE_PROJECT","payload","errorNum","useCount","errorSum","pvSum","uvSum","series","name","data","chart","pvYesterday","map","v","count","uvYesterday","errorYesterday","bordered","extra","className","styles","creatorUserName","BugTwoTone","onClick","push","style","cursor","marginRight","SettingTwoTone","id","QuestionCircleOutlined","size","platformMap","platform","shape","icon","Icon","ICONTYPE","square","height","position","AreaChart","xAxisData","time","top","right","display","alignItems","textAlign","pvRate","Infinity","uvRate","errorRate","Project","useRequest","current","getProjectCardList","pageNum","Number","pageSize","paginated","onError","err","console","log","loading","pagination","error","CardSkeleton","gutter","key","avatar","active","paragraph","rows","list","length","image","PRESENTED_IMAGE_SIMPLE","description","hideOnSinglePage","float","onChange","total","totalCount","module","exports","options","ChartColors","zoom","enabled","toolbar","show","dataLabels","text","stroke","curve","width","labels","yaxis","opposite","align","fill","opacity","legend","tooltipHoverFormatter","val","opts","w","globals","seriesIndex","dataPointIndex","onItemHover","highlightDataSeries","horizontalAlign","dom","useRef","useEffect","ApexCharts","render","destroy","ref","config","start","duration","delay","num","useCountUp","end","countUp","update"],"mappings":"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","file":"js/Project.a3966939.chunk.js","sourcesContent":["import { ArrowUpOutlined, ArrowDownOutlined } from '@ant-design/icons'\nimport { THEMECOLORS } from '@/common/constant'\nimport { Statistic } from 'antd'\nimport React from 'react'\nimport styled from 'styled-components'\nconst WrapStatistic = styled(Statistic)`\n  display: flex;\n  .ant-statistic-title {\n    margin: 0 0 0 6px;\n    line-height: 25px;\n  }\n`\nexport default function GrowthRate({\n  rateNum,\n  title = '',\n  fontSize = '16px',\n}: {\n  rateNum: number\n  title?: string\n  fontSize?: string\n}) {\n  const isGrow = rateNum > 0\n  const color = isGrow ? THEMECOLORS.red : THEMECOLORS.green\n  return (\n    <div>\n      <WrapStatistic\n        title={title}\n        value={rateNum}\n        precision={1}\n        valueStyle={{ color, fontSize }}\n        prefix={rateNum !== 0 && (isGrow ? <ArrowUpOutlined /> : <ArrowDownOutlined />)}\n        suffix=\"%\"\n      />\n    </div>\n  )\n}\n","import React from 'react'\nimport { Avatar, Button, Card, Col, Row, Spin, Tooltip } from 'antd'\nimport { SettingTwoTone, BugTwoTone, QuestionCircleOutlined } from '@ant-design/icons'\nimport { useHistory } from 'react-router-dom'\nimport { ICONTYPE, platformMap } from '@common/constant'\nimport Icon from '@components/Icon'\nimport useCount from '@/hooks/useCount'\nimport * as styles from './index.module.less'\nimport { useDispatch } from 'react-redux'\nimport { CHANGE_PROJECT } from '@/store/modules/global/action-types'\nimport { AProjectCardList } from '@/d.ts/project'\nimport GrowthRate from '@/components/GrowthRate'\nimport styled from 'styled-components'\nimport AreaChart from '@/components/AreaChart'\nconst WrapSpan = styled.span`\n  font-weight: 500;\n  margin-left: 4px;\n  /* color: ${({ theme }) => theme.colors.blue}; */\n`\ntype propsType = {\n  project: AProjectCardList.ProjectListCardItem\n}\nconst ProjectCard = (props: propsType) => {\n  const { project } = props\n  const history = useHistory()\n  const dispatch = useDispatch()\n  const dispatchProject = (projectId: Number) => {\n    dispatch({\n      type: CHANGE_PROJECT,\n      payload: projectId,\n    })\n  }\n  const gotoProjectError = (projectId: number) => {\n    dispatchProject(projectId)\n    history.push(`/errors`)\n  }\n  const errorNum = useCount(project.errorSum)\n  const pvSum = useCount(project.pvSum)\n  const uvSum = useCount(project.uvSum)\n\n  const goToProjectConfig = (id: number) => {\n    history.push(`/project/${id}`)\n  }\n\n  const goToProjectErrorStatistic = (projectId: number) => {\n    dispatchProject(projectId)\n    history.push('/errorOverview')\n  }\n  const series = [\n    {\n      name: 'PV',\n      data: project.chart.pvYesterday.map(v => v.count),\n    },\n    {\n      name: 'UV',\n      data: project.chart.uvYesterday.map(v => v.count),\n    },\n    {\n      name: '错误数',\n      data: project.chart.errorYesterday.map(v => v.count),\n    },\n  ]\n  return (\n    <Card\n      bordered\n      extra={\n        <div className={styles.projectHeader}>\n          <div className={styles.total}>\n            负责人:<WrapSpan>{project.creatorUserName}</WrapSpan>\n          </div>\n          {/* <div className={styles.total}>近24小时</div> */}\n          <div className={styles.total}>\n            PV:<WrapSpan>{pvSum}</WrapSpan>\n          </div>\n          <div className={styles.total}>\n            UV:<WrapSpan>{uvSum}</WrapSpan>\n          </div>\n          <div className={styles.total}>\n            错误数:<WrapSpan>{errorNum}</WrapSpan>\n          </div>\n          <Tooltip title=\"点击进入错误列表\">\n            <BugTwoTone\n              onClick={() => gotoProjectError(project.projectId)}\n              style={{ cursor: 'pointer', marginRight: '6px', fontSize: '16px' }}\n            />\n          </Tooltip>\n          <Tooltip title=\"点击进入项目设置\">\n            <SettingTwoTone\n              onClick={() => goToProjectConfig(project.projectId)}\n              style={{ cursor: 'pointer', marginRight: '6px', fontSize: '16px' }}\n            />\n          </Tooltip>\n          <Tooltip title=\"近24小时统计数据\">\n            <QuestionCircleOutlined style={{ cursor: 'pointer', fontSize: '16px' }} />\n          </Tooltip>\n        </div>\n      }\n      size=\"small\"\n      title={\n        <div className={styles.cardTitle}>\n          <Tooltip title={platformMap[project.platform]}>\n            <Avatar\n              shape=\"square\"\n              className={styles.cardBadge}\n              size={20}\n              icon={<Icon icon={platformMap[project.platform]} type={ICONTYPE.square}></Icon>}\n            />\n          </Tooltip>\n          <Button onClick={() => goToProjectErrorStatistic(project.projectId)} type=\"link\">\n            {project.name}\n          </Button>\n        </div>\n      }\n    >\n      <div style={{ height: '280px', position: 'relative' }}>\n        <AreaChart series={series} xAxisData={project.chart.errorYesterday.map(v => v.time)}></AreaChart>\n        <div style={{ position: 'absolute', top: 0, right: 0, display: 'flex', alignItems: 'center' }}>\n          <div style={{ textAlign: 'center', fontSize: '12px', color: 'gray' }}>同比前一天</div>\n          <GrowthRate title=\"PV:\" rateNum={project.pvRate || (project.pvSum !== 0 ? Infinity : 0)}></GrowthRate>\n          <GrowthRate title=\"UV:\" rateNum={project.uvRate || (project.uvSum !== 0 ? Infinity : 0)}></GrowthRate>\n          <GrowthRate\n            title=\"错误数:\"\n            rateNum={project.errorRate || (project.errorSum !== 0 ? Infinity : 0)}\n          ></GrowthRate>\n        </div>\n      </div>\n    </Card>\n  )\n}\n\nexport default ProjectCard\n","import React, { useEffect, useState } from 'react'\nimport * as styles from './style.module.less'\nimport { Button, Col, Empty, Pagination, Row, Skeleton, Spin } from 'antd'\nimport ProjectCard from '../components/ProjectCard'\nimport { getProjectCardList } from '../services'\nimport { useHistory } from 'react-router-dom'\nimport useRequest from '@ahooksjs/use-request'\n\nfunction Project() {\n  const { data, loading, pagination, error } = useRequest(\n    ({ current }) => getProjectCardList({ pageNum: Number(current), pageSize: 4 }),\n    {\n      paginated: true,\n      onError(err) {\n        console.log('err', err)\n      },\n    },\n  )\n  const history = useHistory()\n  const goCreateProject = () => {\n    history.push('/project/create')\n  }\n  const CardSkeleton = () => (\n    <Row className={styles.row} gutter={[20, 20]}>\n      {[1, 2, 3, 4].map(v => (\n        <Col key={v} span={12}>\n          <Skeleton avatar active={true} paragraph={{ rows: 8 }}></Skeleton>\n        </Col>\n      ))}\n    </Row>\n  )\n  if (error) {\n    return <CardSkeleton></CardSkeleton>\n  }\n  return (\n    <div className={styles.project}>\n      {loading ? (\n        <CardSkeleton></CardSkeleton>\n      ) : (\n        <div>\n          <Row className={styles.row} gutter={[20, 20]}>\n            {data &&\n              (data.list.length > 0 ? (\n                data.list.map(project => {\n                  return (\n                    <Col key={project.projectId} title={project.name} span={12}>\n                      <ProjectCard project={project} />\n                    </Col>\n                  )\n                })\n              ) : (\n                <Col span={24}>\n                  <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description={<span>暂无项目</span>}>\n                    <Button type=\"primary\" onClick={goCreateProject}>\n                      创建项目\n                    </Button>\n                  </Empty>\n                </Col>\n              ))}\n          </Row>\n          <Pagination\n            hideOnSinglePage\n            style={{ float: 'right', marginRight: '20px' }}\n            onChange={pagination.onChange}\n            current={data.pageNum}\n            pageSize={data.pageSize}\n            total={data.totalCount}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Project\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card-title\":\"card-title--3uCVLJ\",\"cardTitle\":\"card-title--3uCVLJ\",\"card-badge\":\"card-badge--2EjuSf\",\"cardBadge\":\"card-badge--2EjuSf\",\"loading\":\"loading--3FBY9G\",\"project-header\":\"project-header--1nHkH2\",\"projectHeader\":\"project-header--1nHkH2\",\"total\":\"total--3UXAn2\"};","import React, { useRef, useEffect } from 'react'\nimport ApexCharts from 'apexcharts'\nimport { ChartColors } from '@/common/constant'\n\ntype propsType = {\n  xAxisData: any[]\n  series: any\n  title?: string\n  toolbar?: boolean\n}\nexport default function AreaChart(props: propsType) {\n  const options = {\n    series: props.series,\n    colors: ChartColors,\n    chart: {\n      type: 'area',\n      height: 280,\n      zoom: {\n        enabled: true,\n      },\n      toolbar: {\n        show: !!props.toolbar,\n      },\n    },\n    dataLabels: {\n      enabled: false,\n    },\n    title: {\n      text: props.title || '',\n    },\n    stroke: {\n      curve: 'smooth',\n      show: true,\n      width: [3, 2, 1.5],\n    },\n    labels: props.xAxisData,\n    yaxis: {\n      opposite: false,\n      labels: {\n        align: 'left',\n      },\n    },\n    fill: {\n      opacity: 1,\n    },\n    legend: {\n      tooltipHoverFormatter: function (val, opts) {\n        return val + ' : ' + opts.w.globals.series[opts.seriesIndex][opts.dataPointIndex] + ''\n      },\n      onItemHover: {\n        highlightDataSeries: true,\n      },\n      horizontalAlign: 'left',\n      position: 'top',\n    },\n  }\n\n  const dom = useRef(null)\n  useEffect(() => {\n    const chart = new ApexCharts(dom.current, options)\n    chart.render()\n    return () => {\n      chart.destroy()\n    }\n  }, [props])\n  return <div ref={dom}></div>\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"project--1I9k5x\",\"row\":\"row--xvS0ho\"};","import React, { useEffect } from 'react'\nimport { useCountUp } from 'react-countup'\nconst config = {\n  start: 0,\n  duration: 1,\n  delay: 0,\n}\nexport default function useCount(num: number) {\n  const { countUp, update } = useCountUp({ end: num, ...config })\n  useEffect(() => {\n    update(num)\n  }, [num])\n  return countUp\n}\n"],"sourceRoot":""}